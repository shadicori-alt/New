#!/bin/bash

# ูุธุงู ุฅุฏุงุฑุฉ ุงูุชูุงุตู ุงูุฐูู - ุชุซุจูุช Linux/Mac

echo "==============================================="
echo "    ูุธุงู ุฅุฏุงุฑุฉ ุงูุชูุงุตู ุงูุฐูู - ุชุซุจูุช Unix"
echo "==============================================="
echo "    ูุณุฎุฉ ูุตุฑูุฉ ูุชูุงููุฉ ูุน ุฐูุงุก ุงุตุทูุงุนู ูุชูุฏู"
echo "==============================================="

# ุงูุชุญูู ูู Python
echo "[1] ุงูุชุญูู ูู Python..."
if ! command -v python3 &> /dev/null; then
    echo "โ Python3 ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Python 3.7 ุฃู ุฃุญุฏุซ."
    echo "๐ฅ https://www.python.org/downloads/"
    exit 1
fi
echo "โ Python3 ูุซุจุช"

# ุงูุชุญูู ูู pip
echo "[2] ุงูุชุญูู ูู pip..."
if ! command -v pip3 &> /dev/null; then
    echo "โ pip3 ุบูุฑ ูุซุจุช. ุฌุงุฑู ุงูุชุซุจูุช..."
    python3 -m ensurepip --upgrade
fi
echo "โ pip3 ูุซุจุช"

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "[3] ุชุซุจูุช ุงููุชุทูุจุงุช..."
pip3 install -r requirements.txt
if [ $? -ne 0 ]; then
    echo "โ ูุดู ุชุซุจูุช ุงููุชุทูุจุงุช"
    exit 1
fi
echo "โ ุชู ุชุซุจูุช ุงููุชุทูุจุงุช"

# ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ
echo "[4] ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ..."
export ADMIN_PASS="admin123"
export SECRET_KEY="your-secret-key-here"
export SHOPIFY_STORE_URL="free-move-eg.myshopify.com"
echo "โ ุชู ุฅุนุฏุงุฏ ูุชุบูุฑุงุช ุงูุจูุฆุฉ"

# ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช
echo "[5] ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช..."
python3 -c "import db; db.init_database()"
echo "โ ุชู ุชููุฆุฉ ูุงุนุฏุฉ ุงูุจูุงูุงุช"

# ุฌุนู ุงููููุงุช ูุงุจูุฉ ููุชูููุฐ
chmod +x run.py
chmod +x install.sh
chmod +x update.py

echo "==============================================="
echo "๐ ุชู ุงูุชุซุจูุช ุจูุฌุงุญ!"
echo "==============================================="
echo "๐ ูููุฉ ูุฑูุฑ ุงููุณุคูู: admin123"
echo "๐ฑ ููุญุฉ ุงูุชุญูู: http://localhost:5000/admin/dashboard"
echo "๐ฑ ุฏุฎูู ุงูููุฏูุจ: http://localhost:5000/agent"
echo "๐ค ุงููุณุงุนุฏ ุงูุฐูู: ูุชุงุญ ูู ุฌููุน ุงูุตูุญุงุช"
echo "==============================================="
echo "๐ ูุชุดุบูู ุงููุธุงู:"
echo "    python3 run.py"
echo "==============================================="
echo "๐ก ูููุฒุงุช ุงููุณุฎุฉ ุงููุตุฑูุฉ:"
echo "   โข ุฃุณุนุงุฑ ุจุงูุฌููู ุงููุตุฑู"
echo "   โข ููุงุทู ุชูุตูู ูุตุฑูุฉ"
echo "   โข ุทุฑู ุฏูุน ูุญููุฉ"
echo "   โข ูุบุฉ ุนุงูููุฉ ูุตุฑูุฉ"
echo "   โข ุชูุงุฑูุฑ ุชููุงุฆูุฉ ูููุงุชุณุงุจ"
echo "   โข ุชูุงูู ูุน Shopify"
echo "==============================================="